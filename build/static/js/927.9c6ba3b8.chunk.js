"use strict";(self.webpackChunkreact_social=self.webpackChunkreact_social||[]).push([[927,573,140],{6608:function(e,s,a){a.d(s,{M:function(){return i},q:function(){return o}});var n=a(4165),t=a(5861),r=a(4569),c=a.n(r),i=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(s,a){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN_START"}),e.prev=1,e.next=4,c().post("/api/auth/login",s);case 4:t=e.sent,a({type:"LOGIN_SUCCESS",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(s,a){return e.apply(this,arguments)}}(),o=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(s){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:"LOGOUT"});case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()},6140:function(e,s,a){a.r(s),a.d(s,{default:function(){return j}});var n=a(4165),t=a(5861),r=a(885),c=a(2791),i=a(6856),o=a(6452),l=a(4569),p=a.n(l),u=a(184);var d=function(){var e="http://localhost:4000/images/",s=(0,c.useContext)(o.V).user,a=(0,c.useRef)(),l=(0,c.useState)(null),d=(0,r.Z)(l,2),h=d[0],m=d[1],x=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(t){var r,c,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r={userId:s._id,desc:a.current.value},!h){e.next=16;break}return c=new FormData,i=Date.now()+h.name,c.append("name",i),c.append("file",h),r.img=i,e.prev=8,e.next=11,p().post("/api/upload",c);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.log(e.t0);case 16:return e.prev=16,e.next=19,p().post("/api/posts",r);case 19:window.location.reload(),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(16),console.log(e.t1);case 25:case"end":return e.stop()}}),e,null,[[8,13],[16,22]])})));return function(s){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"share",children:[(0,u.jsxs)("div",{className:"shareTop",children:[(0,u.jsx)("img",{src:s.profilePhoto?e+s.profilePhoto:e+"noAvatar.png",alt:"",className:"shareimg"}),(0,u.jsx)("input",{placeholder:"What's in your mind "+s.username+"?",ref:a,className:"share-input"})]}),(0,u.jsx)("hr",{className:"shareHr"}),h&&(0,u.jsxs)("div",{className:"share-img-container",children:[(0,u.jsx)("img",{className:" share-img-file",src:URL.createObjectURL(h),alt:""}),(0,u.jsx)(i.lUB,{className:"share-cancel-img-btn",onClick:function(){return m(null)}})]}),(0,u.jsx)("form",{className:"share-bottom",onSubmit:x,children:(0,u.jsxs)("div",{className:"share-options",children:[(0,u.jsxs)("label",{htmlFor:"file",className:"share-option",children:[(0,u.jsx)(i.SnS,{className:"shareIcon mediaicon"}),(0,u.jsx)("span",{className:"shareIconOptionText",children:"Photo or Video"}),(0,u.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpg,.jpeg",onChange:function(e){return m(e.target.files[0])}})]}),(0,u.jsxs)("div",{className:"share-option",children:[(0,u.jsx)(i.yV_,{className:"shareIcon labelicon"}),(0,u.jsx)("span",{className:"shareIconOptionText",children:"Tag"})]}),(0,u.jsxs)("div",{className:"share-option",children:[(0,u.jsx)(i.$0r,{className:"shareIcon locationicon"}),(0,u.jsx)("span",{className:"shareIconOptionText",children:"Location"})]}),(0,u.jsxs)("div",{className:"share-option",children:[(0,u.jsx)(i.a1m,{className:"shareIcon emojiicon"}),(0,u.jsx)("span",{className:"shareIconOptionText",children:"Feelings"})]}),(0,u.jsx)("button",{className:"share-button",type:"submit",children:"Share"})]})})]})},h=a(4651),m=a(3688),x=a(3504);var f=function(e){var s=e.post,a=(0,c.useState)(s.likes.length),l=(0,r.Z)(a,2),d=l[0],f=l[1],j=(0,c.useState)(!1),v=(0,r.Z)(j,2),N=v[0],g=v[1],b="http://localhost:4000/images/",k=(0,c.useState)({}),Z=(0,r.Z)(k,2),w=Z[0],L=Z[1],y=(0,c.useContext)(o.V).user,U=(0,c.useState)(!1),S=(0,r.Z)(U,2),I=S[0],_=S[1];(0,c.useEffect)((function(){g(s.likes.includes(y._id))}),[y._id,s.likes]),(0,c.useEffect)((function(){var e=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().get("/api/users?userId=".concat(s.userId));case 2:a=e.sent,L(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[s.userId]);var C=function(){try{p().put("/api/posts/"+s._id+"/like",{userId:y._id})}catch(e){}f(N?d-1:d+1),g(!N)};return(0,u.jsxs)("div",{className:"post",children:[(0,u.jsxs)("div",{className:"post-top",children:[(0,u.jsxs)("div",{className:"post-top-left",children:[(0,u.jsx)(x.rU,{to:"/profile/".concat(w.username),children:(0,u.jsx)("img",{src:w.profilePhoto?b+w.profilePhoto:b+"noAvatar.png",alt:"",className:"post-user-img"})}),(0,u.jsx)("span",{className:"post-user-name",children:w.username}),(0,u.jsxs)("span",{className:"post-time",children:[(0,m.WU)(s.createdAt),"."]})]}),(0,u.jsxs)("div",{className:"post-top-right",children:[(0,u.jsxs)("div",{className:I?"active-icon":"delete-post-icon",onClick:function(){try{p().delete("/api/posts/"+s._id),window.location.reload()}catch(e){console.log(e)}},children:[(0,u.jsx)(i.FH3,{})," Delete the post"]}),(0,u.jsx)(h.D_A,{className:"share-icon",onClick:function(){_(!I)}})]})]}),(0,u.jsxs)("div",{className:"post-center",children:[(0,u.jsx)("span",{className:"post-caption",children:null===s||void 0===s?void 0:s.desc}),(0,u.jsx)("img",{src:b+s.img,alt:"",className:"post-img"})]}),(0,u.jsx)("div",{className:"post-bottom",children:(0,u.jsxs)("div",{className:"post-bottom-left",children:[(0,u.jsx)("img",{src:b+"likes.png",alt:"",className:"post-like",onClick:C}),(0,u.jsx)("img",{src:b+"heart.png",alt:"",className:"post-heart",onClick:C}),(0,u.jsxs)("span",{className:"post-like-text",children:[d," liked it"]})]})})]})};var j=function(e){var s=e.username,a=(0,c.useState)([]),i=(0,r.Z)(a,2),l=i[0],h=i[1],m=(0,c.useContext)(o.V).user;return(0,c.useEffect)((function(){var e=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!s){e.next=7;break}return e.next=4,p().get("/api/posts/profile/"+s);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,p().get("/api/posts/timeline/"+m._id);case 9:e.t0=e.sent;case 10:a=e.t0,h(a.data.sort((function(e,s){return new Date(s.createdAt)-new Date(e.createdAt)}))),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),console.log(e.t1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[s,m._id]),(0,u.jsxs)("div",{className:"centerbar",children:[(!s||s===m.username)&&(0,u.jsx)(d,{}),l.map((function(e){return(0,u.jsx)(f,{post:e},e._id)}))]})}},5573:function(e,s,a){a.r(s),a.d(s,{default:function(){return m}});var n=a(4165),t=a(5861),r=a(885),c=a(2791),i=a(3504),o=a(6856),l=a(6452),p=a(6608),u=a(4569),d=a.n(u),h=a(184);var m=function(){var e="http://localhost:4000/images/",s=(0,c.useContext)(l.V),a=s.user,u=s.dispatch,m=(0,c.useState)(!1),x=(0,r.Z)(m,2),f=x[0],j=x[1],v=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d().delete("/api/users/"+a._id);case 3:console.log("deleted"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"topbar",children:[(0,h.jsx)("div",{className:"topbar-left",children:(0,h.jsx)(i.rU,{to:"/",children:(0,h.jsxs)("div",{className:"topbar-logo-div",children:[(0,h.jsx)(o.LY4,{className:"topbar-logo-icon"}),(0,h.jsx)("span",{className:"topbar-logo",children:"SOciAL BEinGS"})]})})}),(0,h.jsxs)("div",{className:"topbar-right",children:[(0,h.jsxs)("div",{className:f?"topbarLinks":"topbarLinksmenu",children:[(0,h.jsx)(i.rU,{to:"/",children:(0,h.jsxs)("div",{className:"topbar-menu-icon ",children:[(0,h.jsxs)("span",{className:"topbarLink",children:[" ",(0,h.jsx)(o.bH4,{})]}),(0,h.jsx)("span",{className:"topbarLink-text",children:"Home"})]})}),(0,h.jsx)(i.rU,{to:"/messanger",children:(0,h.jsxs)("div",{className:"topbar-menu-icon ",children:[(0,h.jsxs)("span",{className:"topbarLink",children:[" ",(0,h.jsx)(o.Fmx,{})]}),(0,h.jsx)("span",{className:"topbarLink-text",children:"Message"})]})}),(0,h.jsx)(i.rU,{to:"/showAllUser",children:(0,h.jsxs)("div",{className:"topbar-menu-icon ",children:[(0,h.jsxs)("span",{className:"topbarLink",children:[" ",(0,h.jsx)(o.Mgh,{})]}),(0,h.jsx)("span",{className:"topbarLink-text",children:"Users"})]})}),(0,h.jsx)(i.rU,{to:"/updateuserdata",children:(0,h.jsxs)("div",{className:"topbar-menu-icon ",children:[(0,h.jsx)("span",{className:"topbarLink",children:(0,h.jsx)(o.ZO5,{})}),(0,h.jsx)("span",{className:"topbarLink-text",children:"Update"})]})}),(0,h.jsxs)("div",{className:"topbar-menu-icon ",onClick:function(){(0,p.q)(u),v()},children:[(0,h.jsx)("span",{className:"topbarLink",children:(0,h.jsx)(o.lE7,{})}),(0,h.jsx)("span",{className:"topbarLink-text",children:"Log Out"})]}),(0,h.jsx)(i.rU,{to:"/profile/".concat(a.username),children:(0,h.jsxs)("div",{className:"topbar-menu-icon  ",children:[(0,h.jsx)("img",{src:a.profilePhoto?e+a.profilePhoto:e+"noAvatar.png",alt:"",className:"topbar-dp-img "}),(0,h.jsx)("span",{className:"topbarLink-text topbar-profile-icon",children:"Profile"})]})})]}),(0,h.jsx)("div",{className:"menu-hamburger-icon",onClick:function(){j(!f)},children:f?(0,h.jsx)(o.lUB,{}):(0,h.jsx)(o.xXU,{})})]})]})}},4112:function(e,s,a){a.r(s),a.d(s,{default:function(){return m}});var n=a(4165),t=a(5861),r=a(885),c=a(2791),i=a(4569),o=a.n(i),l=a(5573),p=a(6140),u=a(4653),d=a(6871),h=a(184);var m=function(){var e="http://localhost:4000/images/",s=(0,c.useState)({}),a=(0,r.Z)(s,2),i=a[0],m=a[1],x=(0,d.UO)().username;return(0,c.useEffect)((function(){var e=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("/api/users?username=".concat(x));case 2:s=e.sent,m(s.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[x]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.default,{}),(0,h.jsx)("div",{className:"profile",children:(0,h.jsxs)("div",{className:"profile-right",children:[(0,h.jsxs)("div",{className:"profile-right-top",children:[(0,h.jsxs)("div",{className:"profile-cover",children:[(0,h.jsx)("img",{src:i.coverPhoto?e+i.coverPhoto:e+"noPost.png",alt:"",className:"profile-background-img"}),(0,h.jsx)("img",{src:i.profilePhoto?e+i.profilePhoto:e+"noAvatar.png",alt:"",className:"profile-dp-img"})]}),(0,h.jsxs)("div",{className:"profile-info",children:[(0,h.jsx)("h3",{className:"profile-info-heading",children:i.username}),(0,h.jsx)("span",{className:"profile-info-salutation",children:i.desc})]})]}),(0,h.jsxs)("div",{className:"profile-right-bottom",children:[(0,h.jsx)(p.default,{username:x}),(0,h.jsx)(u.default,{user:i})]})]})})]})}}}]);
//# sourceMappingURL=927.9c6ba3b8.chunk.js.map